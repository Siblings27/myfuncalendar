<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Fun Calendar</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
:root{
  --bg-light:#f5e6ff;
  --cell-light:#b3e0ff;
  --bg-dark:#2e294e;
  --cell-dark:#4b3f72;

  --bg:var(--bg-light);
  --cell:var(--cell-light);
  --today:#fff6b0;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  transition:background 0.6s ease, color 0.6s ease;
  text-align:center;
}

body.dark{
  color:#eee;
}

h1{
  font-family:'Playfair Display', serif;
  margin:20px 0;
}

.controls{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:10px;
  align-items:center;
}

select,button{
  padding:6px 10px;
  border-radius:8px;
  border:1px solid #aaa;
  cursor:pointer;
}

#customPanel{
  max-height:0;
  overflow:hidden;
  opacity:0;
  transition:max-height 0.6s ease, opacity 0.6s ease;
}

#customPanel.open{
  max-height:200px;
  opacity:1;
}

table{
  width:90%;
  margin:auto;
  border-collapse:collapse;
}

th{
  padding:10px;
  background:#ffccd9;
}

td{
  border:1px solid #999;
  height:120px;
  background:var(--cell);
  vertical-align:top;
  transition:background 0.6s ease;
}

.day-number{
  font-size:14px;
  font-weight:bold;
  padding:4px;
  opacity:0.7;
  text-align:left;
  pointer-events:none;
}

/* âœ… WHITE TYPING BOXES */
textarea{
  width:95%;
  height:85px;
  resize:none;
  background:#ffffff;
  border-radius:6px;
  border:1px solid rgba(0,0,0,0.15);
  padding:4px;
  font-family:Arial, sans-serif;
  transition:background 0.4s ease, color 0.4s ease;
}

/* ðŸŒ™ DARK MODE TEXTAREAS */
body.dark textarea{
  background:#1e1e1e;
  color:#eee;
  border:1px solid rgba(255,255,255,0.25);
}

.today{
  background:var(--today) !important;
  animation:pulse 1.5s ease-in-out 2;
}

@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,230,120,0.8);}
  100%{box-shadow:0 0 0 15px rgba(255,230,120,0);}
}
</style>
</head>

<body>

<h1>My Fun Calendar</h1>

<div class="controls">
  <select id="month"></select>
  <select id="year"></select>
  <button id="todayBtn">Go to today</button>
  <button id="arrowBtn">ðŸŽ¨</button>
</div>

<div id="customPanel">
  <select id="palette">
    <option value="lavender">Lavender</option>
    <option value="pink">Pink</option>
    <option value="blue">Blue</option>
    <option value="green">Green</option>
  </select>
  <button id="themeBtn">ðŸŒ™ Dark</button>
</div>

<table id="calendar"></table>

<script>
const monthSel=document.getElementById("month");
const yearSel=document.getElementById("year");
const cal=document.getElementById("calendar");
const todayBtn=document.getElementById("todayBtn");
const paletteSel=document.getElementById("palette");
const themeBtn=document.getElementById("themeBtn");
const arrowBtn=document.getElementById("arrowBtn");
const panel=document.getElementById("customPanel");

const months=["January","February","March","April","May","June","July","August","September","October","November","December"];

months.forEach((m,i)=>monthSel.innerHTML+=`<option value="${i}">${m}</option>`);
for(let y=2000;y<=2035;y++)yearSel.innerHTML+=`<option>${y}</option>`;

const now=new Date();
monthSel.value=now.getMonth();
yearSel.value=now.getFullYear();

function setPalette(lb,lc,db,dc){
  document.documentElement.style.setProperty('--bg-light',lb);
  document.documentElement.style.setProperty('--cell-light',lc);
  document.documentElement.style.setProperty('--bg-dark',db);
  document.documentElement.style.setProperty('--cell-dark',dc);
  applyMode();
}

function applyMode(){
  const dark=document.body.classList.contains("dark");
  document.documentElement.style.setProperty('--bg',dark?'var(--bg-dark)':'var(--bg-light)');
  document.documentElement.style.setProperty('--cell',dark?'var(--cell-dark)':'var(--cell-light)');
}

paletteSel.onchange=()=>{
  if(paletteSel.value==="lavender") setPalette("#f5e6ff","#b3e0ff","#2e294e","#4b3f72");
  if(paletteSel.value==="pink") setPalette("#ffe6f0","#ffb3d1","#3a1f2b","#6b3b4d");
  if(paletteSel.value==="blue") setPalette("#e6f3ff","#b3dfff","#1e2a3a","#3b5b7a");
  if(paletteSel.value==="green") setPalette("#e9f7ef","#b3e0c0","#1f332a","#3f6654");
};

themeBtn.onclick=()=>{
  document.body.classList.toggle("dark");
  applyMode();
  themeBtn.textContent=document.body.classList.contains("dark")?"â˜€ï¸ Light":"ðŸŒ™ Dark";
};

arrowBtn.onclick=()=>panel.classList.toggle("open");

function drawCalendar(){
  cal.innerHTML="";

  const header=document.createElement("tr");
  ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(d=>{
    const th=document.createElement("th");
    th.textContent=d;
    header.appendChild(th);
  });
  cal.appendChild(header);

  const first=new Date(yearSel.value,monthSel.value,1);
  const start=first.getDay();
  const totalDays=new Date(yearSel.value,Number(monthSel.value)+1,0).getDate();

  let row=document.createElement("tr");
  for(let i=0;i<start;i++) row.appendChild(document.createElement("td"));

  for(let day=1;day<=totalDays;day++){
    const td=document.createElement("td");

    const num=document.createElement("div");
    num.className="day-number";
    num.textContent=day;

    const ta=document.createElement("textarea");

    td.appendChild(num);
    td.appendChild(ta);

    if(day===now.getDate() &&
       monthSel.value==now.getMonth() &&
       yearSel.value==now.getFullYear()){
      td.classList.add("today");
      setTimeout(()=>td.scrollIntoView({behavior:"smooth",block:"center"}),300);
    }

    row.appendChild(td);
    if((start+day)%7===0){
      cal.appendChild(row);
      row=document.createElement("tr");
    }
  }
  cal.appendChild(row);
}

monthSel.onchange=drawCalendar;
yearSel.onchange=drawCalendar;
todayBtn.onclick=()=>{
  monthSel.value=now.getMonth();
  yearSel.value=now.getFullYear();
  drawCalendar();
};

drawCalendar();
</script>

</body>
</html>
