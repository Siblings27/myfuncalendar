<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Fun Monthly Calendar</title>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5e6ff;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    select {
      padding: 6px;
      font-size: 14px;
      margin: 5px;
    }

    table {
      border-collapse: collapse;
      width: 95%;
      margin: auto;
    }

    th {
      background-color: #ffccd9;
      font-family: 'Great Vibes', cursive;
      font-size: 20px;
      padding: 8px;
    }

    td {
      border: 1px solid #999;
      background-color: #b3e0ff;
      vertical-align: top;
      height: 120px;
      padding: 4px;
    }

    .date {
      font-weight: bold;
      margin-bottom: 4px;
    }

    textarea {
      width: 95%;
      height: 70px;
      font-size: 13px;
      border: 2px solid #b3e0ff;
      border-radius: 5px;
      resize: vertical;
      background-color: white;
    }
  </style>
</head>

<body>

<h1>My Fun Calendar</h1>

<select id="month"></select>
<select id="year"></select>

<br><br>

<table>
  <thead>
    <tr>
      <th>Sun</th>
      <th>Mon</th>
      <th>Tue</th>
      <th>Wed</th>
      <th>Thu</th>
      <th>Fri</th>
      <th>Sat</th>
    </tr>
  </thead>
  <tbody id="calendar"></tbody>
</table>

<script>
  const monthSelect = document.getElementById("month");
  const yearSelect = document.getElementById("year");
  const calendar = document.getElementById("calendar");

  const months = [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ];

  // Populate month & year dropdowns
  months.forEach((m, i) => {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = m;
    monthSelect.appendChild(option);
  });

  for (let y = 2020; y <= 2035; y++) {
    const option = document.createElement("option");
    option.value = y;
    option.textContent = y;
    yearSelect.appendChild(option);
  }

  const today = new Date();
  monthSelect.value = today.getMonth();
  yearSelect.value = today.getFullYear();

  function buildCalendar() {
    calendar.innerHTML = "";
    const month = monthSelect.value;
    const year = yearSelect.value;

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, Number(month) + 1, 0).getDate();

    let row = document.createElement("tr");
    let cellCount = 0;

    // Empty cells before first day
    for (let i = 0; i < firstDay; i++) {
      row.appendChild(document.createElement("td"));
      cellCount++;
    }

    for (let day = 1; day <= daysInMonth; day++) {
      if (cellCount === 7) {
        calendar.appendChild(row);
        row = document.createElement("tr");
        cellCount = 0;
      }

      const cell = document.createElement("td");
      const dateKey = `${year}-${month}-${day}`;

      const dateLabel = document.createElement("div");
      dateLabel.className = "date";
      dateLabel.textContent = day;

      const textarea = document.createElement("textarea");
      textarea.value = localStorage.getItem(dateKey) || "";

      textarea.addEventListener("input", () => {
        localStorage.setItem(dateKey, textarea.value);
      });

      cell.appendChild(dateLabel);
      cell.appendChild(textarea);
      row.appendChild(cell);
      cellCount++;
    }

    while (cellCount < 7) {
      row.appendChild(document.createElement("td"));
      cellCount++;
    }

    calendar.appendChild(row);
  }

  monthSelect.addEventListener("change", buildCalendar);
  yearSelect.addEventListener("change", buildCalendar);

  buildCalendar();
</script>

</body>
</html>
